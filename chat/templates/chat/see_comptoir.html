{% extends "chat/base.html" %}

{% block content %}

    {% load staticfiles %}

<!--
    <h1>{{ title }}</h1>
    <h3>{{ description }}</h3>
    -->
    <div id="chatbox">
        <input type="hidden" id="top_senti" value={{ msgs.first.id }}>
        <img src="{% static 'chat/images/loader_ball.gif' %}" alt="Loading ..." class="hidden" id="loader" />
        <table>
            <tbody>
            {% for msg in msgs %}
                {% ifchanged %}
                    <tr class="author">
                        <td>{% if msg.owner != user %}<span class="user">{{ msg.owner }}</span>{% endif %}</td>
                        <td class="nopoint"></td>
                        <td>{% if msg.owner == user %}<span class="user">{{ msg.owner }}</span>{% endif %}</td>
                    </tr>
                {% endifchanged %}
                <tr>
                    {# The class attribute is set to "message" if and only if the td is not empty. This is used by the js parser #}
                    <td {% if msg.owner != user %}class="message"{% endif %}><span class="clear"></span><span class="ciphered hidden" >{% if msg.owner != user %}{{ msg.content|unquote_new }}{% endif %}</span></td>
                    {% ifchanged msg.date.day or msg.date.hour or msg.date.minute %}
                    <td class="point"><a href="#" class="fsp-tooltip" data-original-title="{{ msg.date }}" data-placement="{% if msg.owner != user %}right{% else %}left{% endif %}" rel="tooltip"> â€¢ </a></td>
                    {% else %}
                    <td class="nopoint"></td>
                    {% endifchanged %}
                    <td {% if msg.owner == user %}class="message"{% endif %}><span class="clear"></span><span class="ciphered hidden">{% if msg.owner == user %}{{ msg.content|unquote_new }}{% endif %}</span></td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
        <input type="hidden" id="last-msg" value="{{ senti }}">
    </div>

{% endblock %}
